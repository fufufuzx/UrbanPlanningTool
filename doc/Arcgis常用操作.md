# Arcgis数据库常用处理公式

## 批量补全标识码公式
国空各个数据图层中都需要有一个标识码字段，这个标识码字段为18位，是根据行政区代码、扩展码和顺序码生成的，具体如下：
> 数据库录入标准中标识码编号规则为：行政区代码（6位）+扩展码（4位）+顺序码（8位），其中规范扩展码为"0000"。

我们可以用字段计算器中的python函数来批量生成标识码。

**python公式为：**

`!XZQDM! + "0000"+str(!OBJECTID! ).rjust(8, '0')`

***注意：gis的字段计算公式要选"python"***

## 用地面积计算公式
arcgis中字段`Shape_Area`中的面积数值和我们实际cad绘图中的面积数值存在细微的差异，需要用公式重新计算面积。

> 涉及用地面积、规模的字段，不能直接用gis里自带的面积数值，要用椭球面积，需用公式进行换算。

**python公式为：**

`round(!shape.geodesicArea!,2)`

## 其它常用python字符串函数公式及用法

### str.ljust(width[, fillchar])/str.rjust(with[, fillchar])

返回一个原字符串左(右)对齐,并使用 fillchar 填充至长度 width 的新字符串，fillchar 默认为空格。

> 例子：如现有一个数据a = "440508"的字符串，需用0将其补全到18位，可用.rjust(width[, fillchar])的函数公式，
>
> `a.ljust(18, '0') = "440508000000000000"`
>
> `a.rjust(18, '0') = "000000000000440508"`

### str.lstrip/str.rstrip

截掉字符串左（右）边的空格或指定字符。

> 例子：如现有一个数据a = "440508000000000000"的字符串，需用删除"440508"右边所有的"0"，可用`.rstrip`的函数公式，
>
> a.rstrip('0') = "440508"



## Arcgis标注表达式

### arcgis标注空行

"A"&**vbnewline**&"B"

A

B

可以用在Arcgis标注表达式的空行